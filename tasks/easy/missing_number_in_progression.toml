level             = "easy"
name              = "missing_number_in_progression"
tags              = ["math", "array"]
time_to_solve_sec = 300

description_en = """
Given an array that represents elements of an arithmetic progression in order, with one element missing, return the missing number.

An arithmetic progression is a sequence where the difference between consecutive terms is constant. For example, `[2, 4, 6, 8, 10]` has a common difference of $2$.
"""

description_ru = """
Дан массив чисел, представляющий собой упорядоченную арифметическую прогрессию с одним пропущенным элементом. Верните пропущенный элемент.

Арифметическая прогрессия — это последовательность, в которой разность между последовательными членами постоянна. Например, `[2, 4, 6, 8, 10]` имеет общую разность $2$.
"""

limits = """
- $3 \\leq \\text{len}(\\text{arr}) \\leq 100$
- $-1000 \\leq \\text{arr}[i] \\leq 1000$
- Missing element is not at the start
"""

solution = """
def solution(arr: list) -> int:
    # Check if all consecutive differences are the same
    diffs = [arr[i+1] - arr[i] for i in range(len(arr) - 1)]
    if all(d == diffs[0] for d in diffs):
        # Missing element is at the end
        return arr[-1] + diffs[0]

    # Otherwise, missing element is in the middle
    step = (arr[-1] - arr[0]) // len(arr)

    def find_missing(array, p_step):
        if len(array) <= 2:
            return array[0] + p_step

        mid_index = len(array) // 2
        mid_element = array[0] + mid_index * p_step
        real_mid_element = array[mid_index]

        if mid_element == real_mid_element:
            return find_missing(array[mid_index:], p_step)
        else:
            return find_missing(array[:mid_index + 1], p_step)

    return find_missing(arr, step)
"""

examples = """
solution([14, 8, 5]) == 11
solution([14, 11, 5, 2]) == 8
solution([1, 3, 7, 9, 11, 13]) == 5
solution([2, 4, 8, 10, 12, 14]) == 6
solution([1, 6, 11, 16, 21, 31]) == 26
solution([-14, -12, -10, -6, -4]) == -8
solution([1, -1, -2, -3, -4, -5, -6]) == 0
"""

[[input_signature]]
argument_name = "arr"
[input_signature.type]
name = "array"
[input_signature.type.nested]
name = "integer"

[output_signature.type]
name = "integer"

[[asserts]]
arguments = [[2, 4, 8, 10, 12, 14]]
comment   = "Missing 6 in even sequence"
expected  = 6

[[asserts]]
arguments = [[1, 6, 11, 16, 21, 31]]
comment   = "Missing 26 step of 5"
expected  = 26

[[asserts]]
arguments = [[1, 3, 7, 9, 11, 13]]
comment   = "Missing 5 step of 2"
expected  = 5

[[asserts]]
arguments = [[1, -1, -2, -3, -4, -5, -6]]
comment   = "Missing 0 negative sequence"
expected  = 0

[[asserts]]
arguments = [[14, 11, 5, 2]]
comment   = "Descending missing 8"
expected  = 8

[[asserts]]
arguments = [[-14, -12, -10, -6, -4]]
comment   = "Negative ascending missing -8"
expected  = -8

[[asserts]]
arguments = [[14, 8, 5]]
comment   = "Short descending missing 11"
expected  = 11

[[asserts]]
arguments = [[1, 3, 5, 9, 11]]
comment   = "Missing 7"
expected  = 7

[[asserts]]
arguments = [[10, 20, 40, 50]]
comment   = "Missing 30 step of 10"
expected  = 30

[[asserts]]
arguments = [[5, 10, 15, 25, 30]]
comment   = "Missing 20"
expected  = 20

[[asserts]]
arguments = [[2, 6, 10, 14]]
comment   = "Missing 18 at end area"
expected  = 18

[[asserts]]
arguments = [[100, 95, 90, 80, 75]]
comment   = "Descending by 5 missing 85"
expected  = 85

[[asserts]]
arguments = [[3, 9, 15, 27, 33]]
comment   = "Step 6 missing 21"
expected  = 21

[[asserts]]
arguments = [[-10, -5, 5, 10]]
comment   = "Crossing zero missing 0"
expected  = 0

[[asserts]]
arguments = [[7, 14, 21, 35, 42]]
comment   = "Multiples of 7 missing 28"
expected  = 28

[[asserts]]
arguments = [[0, 4, 8, 16, 20]]
comment   = "Starting from 0 missing 12"
expected  = 12

[[asserts]]
arguments = [[50, 40, 30, 10, 0]]
comment   = "Descending by 10 missing 20"
expected  = 20

[[asserts]]
arguments = [[1, 4, 7, 13, 16]]
comment   = "Step 3 missing 10"
expected  = 10

[[asserts]]
arguments = [[-20, -15, -10, 0, 5]]
comment   = "Negative to positive missing -5"
expected  = -5

[[asserts]]
arguments = [[11, 22, 33, 55, 66]]
comment   = "Multiples of 11 missing 44"
expected  = 44

[[asserts]]
arguments = [[8, 16, 24, 40, 48]]
comment   = "Step 8 missing 32"
expected  = 32

[[asserts]]
arguments = [[100, 90, 80, 60, 50]]
comment   = "Large descending missing 70"
expected  = 70

[[asserts]]
arguments = [[5, 15, 25, 45, 55]]
comment   = "Step 10 missing 35"
expected  = 35

[[asserts]]
arguments = [[-30, -20, -10, 10, 20]]
comment   = "Negative positive missing 0"
expected  = 0

[[asserts]]
arguments = [[12, 24, 36, 60, 72]]
comment   = "Multiples of 12 missing 48"
expected  = 48

[[asserts]]
arguments = [[9, 18, 27, 45, 54]]
comment   = "Multiples of 9 missing 36"
expected  = 36

[[asserts]]
arguments = [[2, 5, 8, 14, 17]]
comment   = "Step 3 from 2 missing 11"
expected  = 11

[[asserts]]
arguments = [[20, 15, 10, 0, -5]]
comment   = "Descending through zero missing 5"
expected  = 5

[[asserts]]
arguments = [[6, 12, 18, 30, 36]]
comment   = "Step 6 missing 24"
expected  = 24

[[asserts]]
arguments = [[13, 26, 39, 65, 78]]
comment   = "Step 13 missing 52"
expected  = 52
