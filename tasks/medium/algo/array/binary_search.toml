level             = "medium"
name              = "binary_search"
tags              = ["algo", "array"]
time_to_solve_sec = 90

description_en = """
You are given a sorted array of integers `nums` (in non-decreasing order) and an integer `target`.

Implement a function that returns the index of the **first occurrence** of `target` in `nums`.
If `target` is not present in `nums`, return `-1`.

The algorithm must use binary search.
"""

description_ru = """
Вам дан отсортированный по неубыванию массив целых чисел `nums` и целое число `target`.

Реализуйте функцию, которая возвращает индекс **первого вхождения** значения `target` в `nums`.
Если `target` отсутствует в `nums`, верните `-1`.

Алгоритм должен использовать бинарный поиск.
"""

limits = """
- $0 \\leq n \\leq 100$
- $-100 \\leq a_i \\leq 100 $
"""

solution = """
def solution(nums: list[int], target: int) -> int:
    lo, hi = 0, len(nums) - 1
    res = -1
    while lo <= hi:
        mid = (lo + hi) // 2
        if nums[mid] == target:
            res = mid
            hi = mid - 1
        elif nums[mid] < target:
            lo = mid + 1
        else:
            hi = mid - 1
    return res
"""

examples = """
solution([1, 2, 3, 4, 5], 6) == -1
solution([1, 2, 2, 2, 3, 4, 5], 2) == 1
solution([1, 1, 1, 1, 1, 1, 1], 1) == 0
solution([-10, -5, 0, 4, 7, 9, 11, 11, 13, 14, 15], 7) == 4
"""

[[input_signature]]
argument_name = "nums"
[input_signature.type]
name = "array"
[input_signature.type.nested]
name = "integer"

[[input_signature]]
argument_name = "target"
[input_signature.type]
name = "integer"

[output_signature.type]
name = "integer"

[[asserts]]
arguments = [[1, 2, 2, 2, 3, 4, 5], 2]
comment   = "First occurrence among several equal elements in the middle"
expected  = 1

[[asserts]]
arguments = [[1, 1, 1, 1, 1, 1, 1], 1]
comment   = "All elements equal to target, first index is 0"
expected  = 0

[[asserts]]
arguments = [[-10, -5, 0, 4, 7, 9, 11, 11, 13, 14, 15], 7]
comment   = "Target present once in the middle"
expected  = 4

[[asserts]]
arguments = [[1, 2, 3, 4, 5], 6]
comment   = "Target greater than all elements"
expected  = -1

[[asserts]]
arguments = [[], 3]
comment   = "Empty array always returns -1"
expected  = -1

[[asserts]]
arguments = [[5], 5]
comment   = "Single-element array with target"
expected  = 0

[[asserts]]
arguments = [[5], 2]
comment   = "Single-element array without target"
expected  = -1

[[asserts]]
arguments = [[1, 3, 5, 7, 9], 1]
comment   = "Target at the first position"
expected  = 0

[[asserts]]
arguments = [[1, 3, 5, 7, 9], 9]
comment   = "Target at the last position"
expected  = 4

[[asserts]]
arguments = [[1, 3, 5, 7, 9], 4]
comment   = "Target between existing values but absent"
expected  = -1

[[asserts]]
arguments = [[-5, -3, -3, -3, -1], -3]
comment   = "First occurrence among multiple negative duplicates"
expected  = 1

[[asserts]]
arguments = [[-5, -4, -3, -2, -1], -6]
comment   = "Target less than all elements"
expected  = -1

[[asserts]]
arguments = [[-5, -4, -3, -2, -1], 0]
comment   = "Target greater than all negative elements"
expected  = -1

[[asserts]]
arguments = [[0, 0, 0, 0], 0]
comment   = "All elements are target, first index is 0"
expected  = 0

[[asserts]]
arguments = [[1, 2, 2, 3, 3, 3, 4, 4, 4, 4], 4]
comment   = "First occurrence of several duplicates near the end"
expected  = 6

[[asserts]]
arguments = [[1, 2, 2, 3, 3, 3, 4, 4, 4, 4], 3]
comment   = "First occurrence of several duplicates in the middle"
expected  = 3

[[asserts]]
arguments = [[2, 4, 6, 8, 10, 12], 2]
comment   = "First element is the target in an even-spaced array"
expected  = 0

[[asserts]]
arguments = [[2, 4, 6, 8, 10, 12], 12]
comment   = "Last element is the target in an even-spaced array"
expected  = 5

[[asserts]]
arguments = [[2, 4, 6, 8, 10, 12], 5]
comment   = "Non-present target between two values"
expected  = -1

[[asserts]]
arguments = [[1, 2, 3, 4, 4, 4, 5, 6], 4]
comment   = "First occurrence among three equal values in the middle"
expected  = 3

[[asserts]]
arguments = [[1, 1, 2, 2, 2, 3, 3], 2]
comment   = "First occurrence of multiple target elements after duplicates of another value"
expected  = 2

[[asserts]]
arguments = [[1, 1, 2, 3, 3, 3, 4], 3]
comment   = "First occurrence of three equal values after smaller unique values"
expected  = 3

[[asserts]]
arguments = [[100], 100]
comment   = "Single large value equal to target"
expected  = 0

[[asserts]]
arguments = [[1, 2, 3, 4, 5, 6, 7, 8, 9, 10], 10]
comment   = "Target is the largest value in a 1..10 array"
expected  = 9

[[asserts]]
arguments = [[1, 2, 3, 4, 5, 6, 7, 8, 9, 10], 0]
comment   = "Target smaller than the smallest value in a 1..10 array"
expected  = -1

[[asserts]]
arguments = [[-10, -5, -5, -5, -1, 0, 5, 5, 5, 10], 5]
comment   = "First occurrence of positive duplicates after a zero"
expected  = 6

[[asserts]]
arguments = [[-10, -5, -5, -5, -1, 0, 5, 5, 5, 10], -5]
comment   = "First occurrence among three identical negative values"
expected  = 1

[[asserts]]
arguments = [[0, 1, 1, 1, 2, 2, 3, 4, 5], 2]
comment   = "First occurrence of two equal values after several ones"
expected  = 4

[[asserts]]
arguments = [[0, 1, 1, 1, 2, 2, 3, 4, 5], 3]
comment   = "Single occurrence after duplicates of smaller values"
expected  = 6

[[asserts]]
arguments = [[0, 1, 2, 3, 4, 5], 4]
comment   = "Target in the middle of a small strictly increasing array"
expected  = 4

[[asserts]]
arguments = [
  [
    -100,
    -98,
    -96,
    -94,
    -92,
    -90,
    -88,
    -86,
    -84,
    -82,
    -80,
    -78,
    -76,
    -74,
    -72,
    -70,
    -68,
    -66,
    -64,
    -62,
    -60,
    -58,
    -56,
    -54,
    -52,
    -50,
    -48,
    -46,
    -44,
    -42,
    -40,
    -38,
    -36,
    -34,
    -32,
    -30,
    -28,
    -26,
    -24,
    -22,
    -20,
    -18,
    -16,
    -14,
    -12,
    -10,
    -8,
    -6,
    -4,
    -2,
    0,
    0,
    0,
    0,
    0,
    2,
    4,
    6,
    8,
    10,
    12,
    14,
    16,
    18,
    20,
    22,
    24,
    26,
    28,
    30,
    32,
    34,
    36,
    38,
    40,
    42,
    44,
    46,
    48,
    50,
    52,
    54,
    56,
    58,
    60,
    62,
    64,
    66,
    68,
    70,
    72,
    74,
    76,
    78,
    80,
    82,
    84,
    86,
    88,
    90,
  ],
  0,
]
comment = "Array with 100 elements, target is first occurrence of multiple zeros in the middle"
expected = 50
