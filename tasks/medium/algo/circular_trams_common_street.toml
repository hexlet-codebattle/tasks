level             = "medium"
name              = "circular_trams_common_street"
tags              = ["algo", "graphs", "sets", "simulation"]
time_to_solve_sec = 360

description_en = """
A city has $N$ intersections connected by streets. Two **circular** tram routes are given by the ordered lists of intersections they visit. Each adjacent pair (including the last with the first) defines a street. It is known there is exactly **one** street used by **both** routes. Return the endpoints of that street in ascending order.
"""

description_ru = """
В городе $N$ перекрёстков, соединённых улицами. Даны два **кольцевых** трамвайных маршрута как упорядоченные списки перекрёстков. Каждая соседняя пара (включая последнюю с первой) задаёт улицу. Известно, что существует ровно **одна** улица, по которой ходят **оба** маршрута. Верните номера перекрёстков этой улицы в возрастающем порядке.
"""

limits = """
- $2 \\leq N$
- $1 \\leq \\text{len(first)},\\ \\text{len(second)} \\leq N$
- $1 \\leq \\text{intersections} \\leq N$
"""

solution = """
def solution(n: int, first: list, second: list) -> list:
    def edges(path):
        s = set()
        if not path: return s
        path = path + [path[0]]
        for i in range(len(path)-1):
            u, v = path[i], path[i+1]
            s.add(tuple(sorted((u, v))))
        return s
    common = list(edges(first) & edges(second))[0]
    return list(common)
"""

examples = """
solution(6, [6, 5, 4, 3, 2, 1], [1, 5, 3, 2]) == [1, 2]
solution(2, [1, 2], [2, 1]) == [1, 2]
"""

[[input_signature]]
argument_name = "n"
[input_signature.type]
name = "integer"

[[input_signature]]
argument_name = "first"
[input_signature.type]
name = "array"
[input_signature.type.nested]
name = "integer"

[[input_signature]]
argument_name = "second"
[input_signature.type]
name = "array"
[input_signature.type.nested]
name = "integer"

[output_signature.type]
name = "array"
[output_signature.type.nested]
name = "integer"

# (All provided asserts preserved)
[[asserts]]
arguments = [2, [1, 2], [2, 1]]
expected  = [1, 2]

[[asserts]]
arguments = [6, [4, 6, 1], [1, 4]]
expected  = [1, 4]

[[asserts]]
arguments = [7, [1, 2, 6, 7, 3, 4], [2, 7, 5, 1, 3, 4]]
expected  = [3, 4]

[[asserts]]
arguments = [7, [3, 7, 2, 1, 4, 5], [5, 2, 6, 3, 1, 7, 4]]
expected  = [4, 5]

[[asserts]]
arguments = [4, [3, 4], [1, 3, 4, 2]]
expected  = [3, 4]

[[asserts]]
arguments = [5, [1, 4, 3, 5], [2, 3, 1, 5]]
expected  = [1, 5]

[[asserts]]
arguments = [7, [7, 4, 6, 3, 5, 1], [4, 3, 1, 6, 5, 7]]
expected  = [4, 7]

[[asserts]]
arguments = [5, [4, 2, 1], [3, 1, 5, 2, 4]]
expected  = [2, 4]

[[asserts]]
arguments = [9, [5, 4, 2, 6], [1, 2, 3, 4, 7, 9, 5, 6]]
expected  = [5, 6]

[[asserts]]
arguments = [8, [1, 7, 5, 8, 6], [3, 1, 7, 8, 4, 6, 5, 2]]
expected  = [1, 7]

[[asserts]]
arguments = [7, [2, 3, 4, 1, 6, 5, 7], [4, 3]]
expected  = [3, 4]

[[asserts]]
arguments = [5, [4, 2, 5, 3], [5, 4, 1, 3]]
expected  = [3, 5]

[[asserts]]
arguments = [8, [1, 2, 6, 4, 8, 3, 7, 5], [3, 6, 2, 4]]
expected  = [2, 6]

[[asserts]]
arguments = [7, [1, 4, 7, 6, 5], [3, 5, 7, 4, 6, 2, 1]]
expected  = [4, 7]

[[asserts]]
arguments = [6, [6, 4, 2, 3], [4, 6, 1, 5]]
expected  = [4, 6]

[[asserts]]
arguments = [9, [4, 7], [5, 6, 7, 4, 8, 3]]
expected  = [4, 7]

[[asserts]]
arguments = [10, [1, 10, 3, 2], [6, 9, 3, 1, 10, 8, 2]]
expected  = [1, 10]

[[asserts]]
arguments = [8, [2, 7, 6, 3], [3, 6, 8, 7, 1]]
expected  = [3, 6]

[[asserts]]
arguments = [6, [1, 3, 5], [5, 1, 4, 6, 3, 2]]
expected  = [1, 5]

[[asserts]]
arguments = [7, [6, 1, 4, 5], [1, 2, 6]]
expected  = [1, 6]

[[asserts]]
arguments = [9, [7, 4, 1, 3, 2, 5, 9, 6, 8], [4, 5, 2, 8, 3]]
expected  = [2, 5]

[[asserts]]
arguments = [9, [4, 1, 3, 8, 9, 6], [9, 3, 7, 4, 6, 1, 8, 2, 5]]
expected  = [4, 6]

[[asserts]]
arguments = [5, [5, 2, 4, 1, 3], [1, 4]]
expected  = [1, 4]

[[asserts]]
arguments = [10, [3, 5, 10, 6, 7, 8, 4, 1], [3, 5, 7, 2, 1, 10, 8, 9]]
expected  = [3, 5]

[[asserts]]
arguments = [5, [3, 4], [2, 1, 5, 4, 3]]
expected  = [3, 4]

[[asserts]]
arguments = [5, [5, 1, 3, 2], [3, 4, 2, 1]]
expected  = [1, 3]

[[asserts]]
arguments = [8, [7, 1, 2, 5], [5, 1, 8, 6, 3, 7]]
expected  = [5, 7]

[[asserts]]
arguments = [6, [1, 6, 4, 5, 3, 2], [6, 1]]
expected  = [1, 6]

[[asserts]]
arguments = [9, [5, 4, 3, 8, 1], [4, 7, 8, 5, 1, 6]]
expected  = [1, 5]

[[asserts]]
arguments = [7, [5, 4, 1, 6], [4, 6, 2, 3, 1, 5]]
expected  = [4, 5]

[[asserts]]
arguments = [9, [8, 7, 6, 1, 2], [5, 7, 4, 8, 9, 3, 1, 6, 2]]
expected  = [1, 6]
