level             = "medium"
name              = "check_phone_number"
tags              = ["string"]
time_to_solve_sec = 420

description_en = """
Validate whether a given string can represent a phone number.

The number may optionally start with a country or trunk prefix (`8`, `0`, `+cc`, or `00cc`), may contain an optional area code with or without parentheses, and may use spaces or hyphens as separators.

Return `True` if the string matches the allowed phone number format, otherwise return `False`.
"""

description_ru = """
Проверьте, может ли заданная строка быть телефонным номером.

Номер может необязательно начинаться с кода страны или префикса (`8`, `0`, `+cc` или `00cc`), может содержать необязательный код города в скобках или без них и может использовать пробелы или дефисы как разделители.

Верните `True`, если строка соответствует допустимому формату телефонного номера, иначе верните `False`.
"""

solution = """
import re

def solution(candidate: str) -> bool:
    pattern = r"^((8|0|((\\+|00)\\d{1,2}))[\\- ]?)?(\\(?\\d{3}\\)?[\\- ]?)?[\\d\\- ]{6,}$"
    if not re.fullmatch(pattern, candidate):
        return False

    # Count actual digits (excluding spaces and hyphens)
    digit_count = sum(c.isdigit() for c in candidate)

    # Check for country code length limits
    if candidate.startswith('+'):
        # Extract country code digits
        cc_match = re.match(r"^\\+(\\d+)", candidate)
        if cc_match:
            cc_digits = cc_match.group(1)
            if len(cc_digits) > 2:
                return False

    return 6 <= digit_count <= 15
"""

examples = """
solution("5555555555") == True
solution("55a-555-5555") == False
solution("+123 456 789") == False
solution("(555) 555-5555") == True
"""

[[input_signature]]
argument_name = "candidate"
[input_signature.type]
name = "string"

[output_signature.type]
name = "boolean"

[[asserts]]
arguments = ["5555555555"]
comment   = "Simple 10-digit local number"
expected  = true

[[asserts]]
arguments = ["555555555"]
comment   = "9-digit local number"
expected  = true

[[asserts]]
arguments = ["555-5555"]
comment   = "Short local number with hyphen"
expected  = true

[[asserts]]
arguments = ["(555) 555-5555"]
comment   = "Area code in parentheses with separators"
expected  = true

[[asserts]]
arguments = ["(555) 555-555"]
comment   = "Area code and shorter subscriber number"
expected  = true

[[asserts]]
arguments = ["(555) 555-555-5555"]
comment   = "Long number with multiple hyphens"
expected  = true

[[asserts]]
arguments = ["(555) 555a-555-5555"]
comment   = "Letter in the middle of the number"
expected  = false

[[asserts]]
arguments = ["555*-555-5555"]
comment   = "Invalid symbol '*' in the number"
expected  = false

[[asserts]]
arguments = ["55a-555-5555"]
comment   = "Letter in prefix part"
expected  = false

[[asserts]]
arguments = ["55-55-55"]
comment   = "Short number with hyphens only"
expected  = true

[[asserts]]
arguments = ["55 55 55"]
comment   = "Short number with spaces only"
expected  = true

[[asserts]]
arguments = ["123456"]
comment   = "Minimal length sequence of digits"
expected  = true

[[asserts]]
arguments = ["12345"]
comment   = "Too short, fewer than 6 characters"
expected  = false

[[asserts]]
arguments = ["+1 234 567 890"]
comment   = "International prefix +1 with spaces and area code"
expected  = true

[[asserts]]
arguments = ["0012-345-678-901"]
comment   = "International prefix 0012 with hyphens"
expected  = true

[[asserts]]
arguments = ["+12 3456789012"]
comment   = "International prefix +12, compact remaining digits"
expected  = true

[[asserts]]
arguments = ["+123 456 789"]
comment   = "Too many digits in country code after '+'"
expected  = false

[[asserts]]
arguments = ["8 999 1234567"]
comment   = "Trunk prefix 8 with area and local number"
expected  = true

[[asserts]]
arguments = ["0(999)123456"]
comment   = "Trunk prefix 0 with parenthesized area code"
expected  = true

[[asserts]]
arguments = ["8-123456"]
comment   = "Trunk prefix 8 with hyphen and minimal local part"
expected  = true

[[asserts]]
arguments = ["+1-23-4567890"]
comment   = "International prefix +1 with hyphens in the rest"
expected  = true

[[asserts]]
arguments = ["123-45-678"]
comment   = "Local number split into three groups"
expected  = true

[[asserts]]
arguments = ["123-45-67a"]
comment   = "Invalid letter at the end"
expected  = false

[[asserts]]
arguments = ["+44 (123) 456789"]
comment   = "Country code +44, area code and local part"
expected  = true

[[asserts]]
arguments = ["+44)1234567"]
comment   = "Unmatched closing parenthesis after prefix"
expected  = false

[[asserts]]
arguments = ["(123456) 7890"]
comment   = "Too many digits in the parenthesized block"
expected  = false

[[asserts]]
arguments = ["(123)456"]
comment   = "Too short local part after area code"
expected  = false

[[asserts]]
arguments = ["000 123 456"]
comment   = "Trunk prefix 0 with remaining digits and spaces"
expected  = true

[[asserts]]
arguments = ["800 123 456789"]
comment   = "Prefix 8 and long but valid local part"
expected  = true

[[asserts]]
arguments = ["+9 123"]
comment   = "International prefix with too short local part"
expected  = false
