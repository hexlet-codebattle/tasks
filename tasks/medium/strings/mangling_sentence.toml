level             = "medium"
name              = "mangling_sentence"
tags              = ["strings"]
time_to_solve_sec = 600

description_en = """
Given a sentence, sort characters in each word alphabetically while preserving the original case positions.

For each word, sort its characters alphabetically (case-insensitive), but maintain uppercase letters in their original positions within the word.
"""

description_ru = """
Дано предложение, отсортируйте символы в каждом слове по алфавиту, сохраняя позиции заглавных букв.

Для каждого слова отсортируйте его символы по алфавиту (без учёта регистра), но сохраните заглавные буквы в их исходных позициях внутри слова.
"""

limits = """
- $1 \\leq |\\text{sentence}| \\leq 200$
"""

solution = """
def solution(sentence: str) -> str:
    import re
    words = re.findall(r'\\w+|\\W+', sentence)
    result = []
    for word in words:
        if re.match(r'\\w+', word):
            lower = sorted(word.lower())
            chars = []
            for i, c in enumerate(word):
                chars.append(lower[i].upper() if c.isupper() else lower[i])
            result.append(''.join(chars))
        else:
            result.append(word)
    return ''.join(result)
"""

examples = """
solution("Hello, World!") == "Ehllo, Dlorw!"
solution("Test case.") == "Estt aces."
solution("Code is fun!") == "Cdeo is fnu!"
"""

[[input_signature]]
argument_name = "sentence"
[input_signature.type]
name = "string"

[output_signature.type]
name = "string"

[[asserts]]
arguments = ["Eye of Newt, and Toe of Frog, Wool of Bat, and Tongue of Dog."]
comment   = "Shakespeare with punctuation"
expected  = "Eey fo Entw, adn Eot fo Fgor, Loow fo Abt, adn Egnotu fo Dgo."

[[asserts]]
arguments = ["Hello World"]
comment   = "Two word greeting"
expected  = "Ehllo Dlorw"

[[asserts]]
arguments = ["abc"]
comment   = "Already sorted"
expected  = "abc"

[[asserts]]
arguments = ["cba"]
comment   = "Reverse sorted"
expected  = "abc"

[[asserts]]
arguments = ["ABC"]
comment   = "All uppercase"
expected  = "ABC"

[[asserts]]
arguments = ["The Quick Brown Fox"]
comment   = "Classic pangram start"
expected  = "Eht Cikqu Bnorw Fox"

[[asserts]]
arguments = ["a"]
comment   = "Single character"
expected  = "a"

[[asserts]]
arguments = ["Test"]
comment   = "Capital first letter"
expected  = "Estt"

[[asserts]]
arguments = ["TEST"]
comment   = "All caps word"
expected  = "ESTT"

[[asserts]]
arguments = ["test"]
comment   = "All lowercase"
expected  = "estt"

[[asserts]]
arguments = ["zyx wvu"]
comment   = "Reverse alphabet"
expected  = "xyz uvw"

[[asserts]]
arguments = ["Programming"]
comment   = "Longer word"
expected  = "Aggimmnoprr"

[[asserts]]
arguments = ["Code is Fun"]
comment   = "Three words"
expected  = "Cdeo is Fnu"

[[asserts]]
arguments = ["aB cD"]
comment   = "Mixed case small words"
expected  = "Ab Cd"

[[asserts]]
arguments = ["Python"]
comment   = "Language name"
expected  = "Hnopty"

[[asserts]]
arguments = ["AbC"]
comment   = "Alternating case"
expected  = "AbC"

[[asserts]]
arguments = ["aBc"]
comment   = "Alternating case variant"
expected  = "Abc"

[[asserts]]
arguments = ["Software Engineering"]
comment   = "Two word phrase"
expected  = "Aeforstw Eeeggiinnnr"

[[asserts]]
arguments = ["Data Structures"]
comment   = "CS concept"
expected  = "Aadt Cerrssttuu"

[[asserts]]
arguments = ["Algorithm"]
comment   = "CS term"
expected  = "Aghilmort"

[[asserts]]
arguments = ["Variable"]
comment   = "Programming term"
expected  = "Aabeilrv"

[[asserts]]
arguments = ["Function"]
comment   = "Code concept"
expected  = "Cfinnotu"

[[asserts]]
arguments = ["Array"]
comment   = "Data structure"
expected  = "Aarry"

[[asserts]]
arguments = ["This challenge doesn't seem so hard."]
comment   = "Sentence with apostrophe"
expected  = "Hist aceeghlln denos't eems os adhr."

[[asserts]]
arguments = ["Hello, World!"]
comment   = "Punctuation marks"
expected  = "Ehllo, Dlorw!"

[[asserts]]
arguments = ["zZ"]
comment   = "Two letter same"
expected  = "Zz"

[[asserts]]
arguments = ["ba"]
comment   = "Two letter reverse"
expected  = "ab"

[[asserts]]
arguments = ["BA"]
comment   = "Two letter reverse caps"
expected  = "AB"

[[asserts]]
arguments = ["quick"]
comment   = "Simple word"
expected  = "cikqu"
