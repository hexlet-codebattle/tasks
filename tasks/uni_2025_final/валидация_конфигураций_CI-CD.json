{
  "name": "Валидация_конфигураций_CI/CD",
  "description_ru": "Существуют три вида задач: сборка `build`, тестирование `test`, развёртывание `deploy`. Конфиг запуска CI/CD содержит произвольный набор задач. Проверьте, что он валидный: этап тестирования всегда идет после сборки (возможно не сразу после), развёртывание выполняется только после успешных тестов последней сборки (возможно не сразу после). После очередной сборки старое тестирование не валидно. Для набора таких конфигов нужно вернуть массив логических вердиктов валидности.",
  "description_en": "There are three types of tasks: build ('build'), testing ('test'), deployment ('deploy'). CI/CD configuration contains an arbitrary set of tasks. Check if it's valid: testing stage always comes after build (possibly not immediately after), deployment is performed only after successful tests (possibly not immediately after). A new build invalidates previous tests. For a set of such configs, you need to return an array of boolean verdicts of validity.",
  "input_signature": [
    {
      "argument_name": "configs",
      "type": {
        "name": "array",
        "nested": {
          "name": "array",
          "nested": {
            "name": "string"
          }
        }
      }
    }
  ],
  "output_signature": {
    "type": {
      "name": "array",
      "nested": {
        "name": "boolean"
      }
    }
  },
  "asserts": [
    {
      "comment": "Короткий смешанный набор 1 1/2",
      "arguments": [
        [
          ["build", "test"],
          ["build", "deploy"]
        ]
      ],
      "expected": [true, false]
    },
    {
      "comment": "Короткий смешанный набор 1 2/2",
      "arguments": [[["build", "test", "build", "test", "deploy"]]],
      "expected": [true]
    },
    {
      "comment": "Короткий смешанный набор 2 1/2",
      "arguments": [
        [
          ["test", "build", "test", "deploy"],
          ["build", "test", "deploy", "deploy"]
        ]
      ],
      "expected": [false, true]
    },
    {
      "comment": "Короткий смешанный набор 2 2/2",
      "arguments": [[["build", "test", "build"], ["deploy"]]],
      "expected": [true, false]
    },
    {
      "comment": "Базовые и краевые случаи со смешанными результатами 1/5",
      "arguments": [[[], ["test"]]],
      "expected": [true, false]
    },
    {
      "comment": "Базовые и краевые случаи со смешанными результатами 2/5",
      "arguments": [[["build"], ["deploy"]]],
      "expected": [true, false]
    },
    {
      "comment": "Базовые и краевые случаи со смешанными результатами 3/5",
      "arguments": [
        [
          ["build", "test"],
          ["test", "deploy"]
        ]
      ],
      "expected": [true, false]
    },
    {
      "comment": "Базовые и краевые случаи со смешанными результатами 4/5",
      "arguments": [
        [
          ["build", "deploy"],
          ["build", "test", "deploy"]
        ]
      ],
      "expected": [false, true]
    },
    {
      "comment": "Базовые и краевые случаи со смешанными результатами 5/5",
      "arguments": [
        [
          ["deploy", "build", "test"],
          ["test", "build", "deploy"]
        ]
      ],
      "expected": [false, false]
    },
    {
      "comment": "Сложные случаи с повторами и инвалидацией тестов 1/6",
      "arguments": [
        [
          ["build", "test", "build"],
          ["test", "test"]
        ]
      ],
      "expected": [true, false]
    },
    {
      "comment": "Сложные случаи с повторами и инвалидацией тестов 2/6",
      "arguments": [
        [
          ["build", "build", "test"],
          ["build", "test", "build", "deploy"]
        ]
      ],
      "expected": [true, false]
    },
    {
      "comment": "Сложные случаи с повторами и инвалидацией тестов 3/6",
      "arguments": [
        [
          ["build", "test", "test"],
          ["deploy", "deploy"]
        ]
      ],
      "expected": [true, false]
    },
    {
      "comment": "Сложные случаи с повторами и инвалидацией тестов 4/6",
      "arguments": [
        [
          ["build", "test", "build", "test"],
          ["build", "test", "deploy", "deploy"]
        ]
      ],
      "expected": [true, true]
    },
    {
      "comment": "Сложные случаи с повторами и инвалидацией тестов 5/6",
      "arguments": [
        [
          ["build", "deploy", "build", "test", "deploy"],
          ["build", "test", "build", "test", "deploy"]
        ]
      ],
      "expected": [false, true]
    },
    {
      "comment": "Сложные случаи с повторами и инвалидацией тестов 6/6",
      "arguments": [
        [
          ["build", "deploy", "deploy"],
          ["build", "test", "deploy", "build", "deploy"]
        ]
      ],
      "expected": [false, false]
    },
    {
      "comment": "Длинные и смешанные последовательности 1/4",
      "arguments": [
        [
          ["deploy", "test", "build"],
          ["build", "test", "deploy", "build"]
        ]
      ],
      "expected": [false, true]
    },
    {
      "comment": "Длинные и смешанные последовательности 2/4",
      "arguments": [
        [
          ["build", "test", "deploy", "build", "test", "deploy"],
          [
            "build",
            "build",
            "build",
            "test",
            "test",
            "deploy",
            "deploy",
            "deploy"
          ]
        ]
      ],
      "expected": [true, true]
    },
    {
      "comment": "Длинные и смешанные последовательности 3/4",
      "arguments": [
        [
          ["build", "test", "deploy", "build", "test"],
          [
            "build",
            "test",
            "build",
            "deploy",
            "test",
            "deploy",
            "build",
            "deploy"
          ]
        ]
      ],
      "expected": [true, false]
    },
    {
      "comment": "Длинные и смешанные последовательности 4/4",
      "arguments": [
        [
          ["build", "test", "build", "test", "build", "test"],
          [
            "build",
            "test",
            "deploy",
            "deploy",
            "build",
            "test",
            "test",
            "deploy"
          ]
        ]
      ],
      "expected": [true, true]
    }
  ],
  "examples": "```\nsolution([\n [\"build\", \"test\", \"deploy\"],\n [\"build\", \"test\", \"build\", \"deploy\"]\n]) == [True, False]\n```",
  "solution": "def solution(configs):\n def f(config):\n  b=t=-1\n  for i,x in enumerate(config):\n   if x=='build':b=i\n   elif x=='test':\n    if b==-1:return False\n    t=i\n   elif x=='deploy':\n    if t==-1 or t<b:return False\n  return True\n return[f(c)for c in configs]",
  "level": "medium",
  "tags": ["validation", "logic"],
  "visibility": "public",
  "origin": "user",
  "generator_lang": "py",
  "time_to_solve_sec": 900
}
